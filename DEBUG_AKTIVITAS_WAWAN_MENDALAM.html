<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Debug Aktivitas Wawan - Mendalam</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #dc2626, #ef4444);
            color: white;
            border-radius: 8px;
        }
        .debug-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: #f8fafc;
        }
        .error {
            border-color: #ef4444;
            background: #fef2f2;
        }
        .success {
            border-color: #10b981;
            background: #ecfdf5;
        }
        .debug-button {
            background: #dc2626;
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin: 10px;
        }
        .debug-button:hover {
            background: #b91c1c;
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 6px;
            background: #f1f5f9;
            border-left: 4px solid #3b82f6;
        }
        .code {
            background: #1f2937;
            color: #f9fafb;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
            margin: 10px 0;
            max-height: 300px;
            overflow-y: auto;
        }
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
            font-size: 12px;
        }
        .data-table th, .data-table td {
            border: 1px solid #e5e7eb;
            padding: 6px;
            text-align: left;
        }
        .data-table th {
            background: #f3f4f6;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Debug Aktivitas Wawan - Mendalam</h1>
            <p>Debugging mendalam untuk menemukan mengapa aktivitas masih belum muncul</p>
        </div>

        <div class="debug-section error">
            <h3>‚ùå Status: Aktivitas Masih Belum Muncul</h3>
            <div class="result">
                <p>Meskipun fix sudah dilakukan (Updated 9 records), aktivitas masih belum muncul di dialog. Mari kita debug lebih mendalam.</p>
            </div>
        </div>

        <div class="debug-section">
            <h3>üîç Step 1: Cek localStorage Setelah Fix</h3>
            <button class="debug-button" onclick="checkLocalStorageAfterFix()">
                Cek localStorage Setelah Fix
            </button>
            <div id="localStorage-result" class="result" style="display: none;">
                <div id="localStorage-output"></div>
            </div>
        </div>

        <div class="debug-section">
            <h3>üß™ Step 2: Test Exact Dialog Function</h3>
            <button class="debug-button" onclick="testExactDialogFunction()">
                Test Exact Dialog Function
            </button>
            <div id="dialog-result" class="result" style="display: none;">
                <div id="dialog-output"></div>
            </div>
        </div>

        <div class="debug-section">
            <h3>üîß Step 3: Manual Data Injection</h3>
            <button class="debug-button" onclick="manualDataInjection()">
                Manual Data Injection
            </button>
            <div id="injection-result" class="result" style="display: none;">
                <div id="injection-output"></div>
            </div>
        </div>

        <div class="debug-section">
            <h3>üìä Step 4: Console Log Analysis</h3>
            <button class="debug-button" onclick="analyzeConsoleLogs()">
                Analyze Console Logs
            </button>
            <div id="console-result" class="result" style="display: none;">
                <div id="console-output"></div>
            </div>
        </div>

        <div class="debug-section">
            <h3>üéØ Step 5: Force Fix dengan Data Baru</h3>
            <button class="debug-button" onclick="forceFixWithNewData()">
                Force Fix dengan Data Baru
            </button>
            <div id="force-result" class="result" style="display: none;">
                <div id="force-output"></div>
            </div>
        </div>
    </div>

    <script>
        // Capture console logs
        const originalLog = console.log;
        const originalError = console.error;
        const consoleLogs = [];

        console.log = function(...args) {
            consoleLogs.push({type: 'log', message: args.join(' '), timestamp: new Date()});
            originalLog.apply(console, args);
        };

        console.error = function(...args) {
            consoleLogs.push({type: 'error', message: args.join(' '), timestamp: new Date()});
            originalError.apply(console, args);
        };

        function checkLocalStorageAfterFix() {
            const resultDiv = document.getElementById('localStorage-result');
            const outputDiv = document.getElementById('localStorage-output');
            
            try {
                const localDatabase = localStorage.getItem('local-database');
                if (!localDatabase) {
                    outputDiv.innerHTML = `
                        <div style="color: #ef4444; font-weight: bold;">
                            ‚ùå localStorage 'local-database' tidak ditemukan!
                        </div>
                    `;
                    resultDiv.style.display = 'block';
                    return;
                }

                const data = JSON.parse(localDatabase);
                
                // Check all data with userId "2"
                const userId2Tasks = data.tasks?.filter(t => t.userId === "2") || [];
                const userId2Supervisions = data.supervisions?.filter(s => s.userId === "2") || [];
                const userId2Events = data.events?.filter(e => e.userId === "2") || [];
                const userId2AdditionalTasks = data.additionalTasks?.filter(a => a.userId === "2") || [];
                
                // Check all data with userId "1762696525337" (should be 0 after fix)
                const oldUserIdTasks = data.tasks?.filter(t => t.userId === "1762696525337") || [];
                const oldUserIdSupervisions = data.supervisions?.filter(s => s.userId === "1762696525337") || [];
                const oldUserIdEvents = data.events?.filter(e => e.userId === "1762696525337") || [];
                const oldUserIdAdditionalTasks = data.additionalTasks?.filter(a => a.userId === "1762696525337") || [];
                
                // Check users
                const user2 = data.users?.find(u => u.id === "2");
                const userOld = data.users?.find(u => u.id === "1762696525337");
                
                outputDiv.innerHTML = `
                    <h4>üîç localStorage Analysis Setelah Fix:</h4>
                    
                    <h5>üë§ Users:</h5>
                    <table class="data-table">
                        <tr><th>Check</th><th>Status</th><th>Detail</th></tr>
                        <tr><td>User dengan ID "2"</td><td>${user2 ? '‚úÖ' : '‚ùå'}</td><td>${user2 ? user2.username + ' - ' + user2.fullName : 'Not found'}</td></tr>
                        <tr><td>User dengan ID "1762696525337"</td><td>${userOld ? '‚ùå Masih ada' : '‚úÖ Sudah dihapus'}</td><td>${userOld ? userOld.username + ' - ' + userOld.fullName : 'Sudah tidak ada'}</td></tr>
                    </table>
                    
                    <h5>üìä Aktivitas dengan userId "2" (Seharusnya ada):</h5>
                    <table class="data-table">
                        <tr><th>Type</th><th>Count</th><th>Status</th><th>Sample</th></tr>
                        <tr><td>Tasks</td><td>${userId2Tasks.length}</td><td>${userId2Tasks.length > 0 ? '‚úÖ' : '‚ùå'}</td><td>${userId2Tasks[0]?.title || 'N/A'}</td></tr>
                        <tr><td>Supervisions</td><td>${userId2Supervisions.length}</td><td>${userId2Supervisions.length > 0 ? '‚úÖ' : '‚ùå'}</td><td>${userId2Supervisions[0]?.schoolName || 'N/A'}</td></tr>
                        <tr><td>Events</td><td>${userId2Events.length}</td><td>${userId2Events.length > 0 ? '‚úÖ' : '‚ùå'}</td><td>${userId2Events[0]?.name || 'N/A'}</td></tr>
                        <tr><td>Additional Tasks</td><td>${userId2AdditionalTasks.length}</td><td>${userId2AdditionalTasks.length > 0 ? '‚úÖ' : '‚ùå'}</td><td>${userId2AdditionalTasks[0]?.title || 'N/A'}</td></tr>
                    </table>
                    
                    <h5>üóëÔ∏è Aktivitas dengan userId "1762696525337" (Seharusnya 0):</h5>
                    <table class="data-table">
                        <tr><th>Type</th><th>Count</th><th>Status</th></tr>
                        <tr><td>Tasks</td><td>${oldUserIdTasks.length}</td><td>${oldUserIdTasks.length === 0 ? '‚úÖ Fixed' : '‚ùå Masih ada'}</td></tr>
                        <tr><td>Supervisions</td><td>${oldUserIdSupervisions.length}</td><td>${oldUserIdSupervisions.length === 0 ? '‚úÖ Fixed' : '‚ùå Masih ada'}</td></tr>
                        <tr><td>Events</td><td>${oldUserIdEvents.length}</td><td>${oldUserIdEvents.length === 0 ? '‚úÖ Fixed' : '‚ùå Masih ada'}</td></tr>
                        <tr><td>Additional Tasks</td><td>${oldUserIdAdditionalTasks.length}</td><td>${oldUserIdAdditionalTasks.length === 0 ? '‚úÖ Fixed' : '‚ùå Masih ada'}</td></tr>
                    </table>
                    
                    <h5>üìã Total Aktivitas untuk userId "2": ${userId2Tasks.length + userId2Supervisions.length + userId2Events.length + userId2AdditionalTasks.length}</h5>
                    
                    <h5>üîç Raw Data Sample (userId "2"):</h5>
                    <div class="code">${JSON.stringify({
                        tasks: userId2Tasks.slice(0, 2),
                        supervisions: userId2Supervisions.slice(0, 2),
                        events: userId2Events.slice(0, 2),
                        additionalTasks: userId2AdditionalTasks.slice(0, 2)
                    }, null, 2)}</div>
                `;
                
                resultDiv.style.display = 'block';
                console.log('üîç localStorage check completed');

            } catch (error) {
                outputDiv.innerHTML = `
                    <div style="color: #ef4444; font-weight: bold;">
                        ‚ùå Error checking localStorage: ${error.message}
                    </div>
                `;
                resultDiv.style.display = 'block';
                console.error('‚ùå Error:', error);
            }
        }

        function testExactDialogFunction() {
            const resultDiv = document.getElementById('dialog-result');
            const outputDiv = document.getElementById('dialog-output');
            
            // Test dengan parameter yang exact sama dengan aplikasi
            const userId = "2";
            const userName = "wawan";
            
            console.log('üß™ Testing exact dialog function with:', { userId, userName });
            
            const getLocalStorageActivities = () => {
                try {
                    console.log('üîç Getting localStorage activities for:', { userId, userName });
                    
                    const getLocalStorageData = (key) => {
                        try {
                            const data = localStorage.getItem(key);
                            return data ? JSON.parse(data) : [];
                        } catch {
                            return [];
                        }
                    };

                    const filterByUser = (data, userField = 'userId') => {
                        if (!data || !Array.isArray(data)) {
                            console.log(`‚ùå No data or not array for field: ${userField}`);
                            return [];
                        }
                        
                        console.log(`üîç Filtering ${data.length} items by ${userField} for user:`, { userId, userName });
                        
                        const filtered = data.filter(item => {
                            console.log(`üîç Checking item:`, item);
                            
                            // Match by userId (exact match)
                            if (item[userField] === userId) {
                                console.log(`‚úÖ Found match by ${userField}:`, item);
                                return true;
                            }
                            
                            // Match by username (case insensitive)
                            if (item.username && userName && 
                                item.username.toLowerCase() === userName.toLowerCase()) {
                                console.log(`‚úÖ Found match by username:`, item);
                                return true;
                            }
                            
                            console.log(`‚ùå No match for item:`, item);
                            return false;
                        });
                        
                        console.log(`üìä Filtered ${filtered.length} items from ${data.length} total`);
                        return filtered;
                    };

                    const localData = getLocalStorageData('local-database') || {};
                    console.log('üì¶ Local database keys:', Object.keys(localData));
                    console.log('üìä Local database counts:', {
                        tasks: localData.tasks?.length || 0,
                        supervisions: localData.supervisions?.length || 0,
                        events: localData.events?.length || 0,
                        additionalTasks: localData.additionalTasks?.length || 0
                    });
                    
                    const tasks = filterByUser(localData.tasks || []);
                    const supervisions = filterByUser(localData.supervisions || []);
                    const events = filterByUser(localData.events || []);
                    const additionalTasks = filterByUser(localData.additionalTasks || []);

                    console.log('‚úÖ LocalStorage fallback data:', {
                        tasks: tasks.length,
                        supervisions: supervisions.length,
                        events: events.length,
                        additionalTasks: additionalTasks.length
                    });

                    return { tasks, supervisions, events, additionalTasks };
                } catch (error) {
                    console.error('‚ùå Error loading from localStorage:', error);
                    return { tasks: [], supervisions: [], events: [], additionalTasks: [] };
                }
            };

            // Run test
            const result = getLocalStorageActivities();
            const totalActivities = result.tasks.length + result.supervisions.length + result.events.length + result.additionalTasks.length;
            
            outputDiv.innerHTML = `
                <h4>üß™ Test Exact Dialog Function:</h4>
                <p><strong>Parameters:</strong> userId="${userId}", userName="${userName}"</p>
                
                <table class="data-table">
                    <tr><th>Type</th><th>Count</th><th>Status</th></tr>
                    <tr><td>Tasks</td><td>${result.tasks.length}</td><td>${result.tasks.length > 0 ? '‚úÖ' : '‚ùå'}</td></tr>
                    <tr><td>Supervisions</td><td>${result.supervisions.length}</td><td>${result.supervisions.length > 0 ? '‚úÖ' : '‚ùå'}</td></tr>
                    <tr><td>Events</td><td>${result.events.length}</td><td>${result.events.length > 0 ? '‚úÖ' : '‚ùå'}</td></tr>
                    <tr><td>Additional Tasks</td><td>${result.additionalTasks.length}</td><td>${result.additionalTasks.length > 0 ? '‚úÖ' : '‚ùå'}</td></tr>
                </table>
                
                <h4>üìä Total Activities: ${totalActivities}</h4>
                
                ${totalActivities > 0 ? 
                    '<div style="color: #10b981; font-weight: bold;">‚úÖ SUCCESS: Function mengembalikan data!</div>' : 
                    '<div style="color: #ef4444; font-weight: bold;">‚ùå FAILED: Function tidak mengembalikan data.</div>'
                }
                
                <h5>üîç Detailed Results:</h5>
                <div class="code">${JSON.stringify(result, null, 2)}</div>
                
                <p><strong>Lihat Console untuk detail logging.</strong></p>
            `;
            
            resultDiv.style.display = 'block';
            console.log('üß™ Test completed:', result);
        }

        function manualDataInjection() {
            const resultDiv = document.getElementById('injection-result');
            const outputDiv = document.getElementById('injection-output');
            
            try {
                // Create minimal test data with userId "2"
                const testData = {
                    users: [
                        {
                            id: "2",
                            username: "wawan",
                            fullName: "H. Wawan Yogaswara, S.Pd, M.Pd",
                            role: "pengawas"
                        }
                    ],
                    tasks: [
                        {
                            id: "task-1",
                            userId: "2",
                            title: "Test Task untuk Wawan",
                            category: "Test",
                            completed: true,
                            date: "2025-12-20T00:00:00.000Z",
                            description: "Test task untuk debugging"
                        }
                    ],
                    supervisions: [
                        {
                            id: "supervision-1",
                            userId: "2",
                            schoolName: "Test School",
                            type: "Akademik",
                            findings: "Test findings",
                            date: "2025-12-20T00:00:00.000Z"
                        }
                    ],
                    events: [
                        {
                            id: "event-1",
                            userId: "2",
                            name: "Test Event",
                            date: "2025-12-20T00:00:00.000Z",
                            description: "Test event untuk debugging"
                        },
                        {
                            id: "event-2",
                            userId: "2",
                            name: "Test Event 2",
                            date: "2025-12-20T00:00:00.000Z",
                            description: "Test event 2 untuk debugging"
                        }
                    ],
                    additionalTasks: [
                        {
                            id: "additional-1",
                            userId: "2",
                            title: "Test Additional Task",
                            organizer: "Test Organizer",
                            location: "Test Location",
                            date: "2025-12-20T00:00:00.000Z"
                        }
                    ],
                    schools: []
                };
                
                // Save to localStorage
                localStorage.setItem('local-database', JSON.stringify(testData));
                
                outputDiv.innerHTML = `
                    <h4>‚úÖ Manual Data Injection Berhasil!</h4>
                    <p>Data test minimal telah di-inject ke localStorage dengan userId "2".</p>
                    
                    <h5>üìä Data yang di-inject:</h5>
                    <table class="data-table">
                        <tr><th>Type</th><th>Count</th><th>Sample</th></tr>
                        <tr><td>Users</td><td>1</td><td>wawan (ID: 2)</td></tr>
                        <tr><td>Tasks</td><td>1</td><td>Test Task untuk Wawan</td></tr>
                        <tr><td>Supervisions</td><td>1</td><td>Test School</td></tr>
                        <tr><td>Events</td><td>2</td><td>Test Event, Test Event 2</td></tr>
                        <tr><td>Additional Tasks</td><td>1</td><td>Test Additional Task</td></tr>
                    </table>
                    
                    <div style="color: #10b981; font-weight: bold; margin-top: 15px;">
                        ‚úÖ Sekarang refresh aplikasi dan test dialog lagi!
                    </div>
                    
                    <h5>üîç Raw Data:</h5>
                    <div class="code">${JSON.stringify(testData, null, 2)}</div>
                `;
                
                resultDiv.style.display = 'block';
                console.log('‚úÖ Manual data injection completed:', testData);

            } catch (error) {
                outputDiv.innerHTML = `
                    <div style="color: #ef4444; font-weight: bold;">
                        ‚ùå Error injecting data: ${error.message}
                    </div>
                `;
                resultDiv.style.display = 'block';
                console.error('‚ùå Error:', error);
            }
        }

        function analyzeConsoleLogs() {
            const resultDiv = document.getElementById('console-result');
            const outputDiv = document.getElementById('console-output');
            
            const recentLogs = consoleLogs.slice(-20); // Last 20 logs
            
            outputDiv.innerHTML = `
                <h4>üìä Console Log Analysis:</h4>
                <p>Menampilkan 20 log terakhir untuk analisis:</p>
                
                <div class="code">
${recentLogs.map(log => 
    `[${log.timestamp.toLocaleTimeString()}] ${log.type.toUpperCase()}: ${log.message}`
).join('\n')}
                </div>
                
                <h5>üîç Log Summary:</h5>
                <ul>
                    <li>Total logs captured: ${consoleLogs.length}</li>
                    <li>Error logs: ${consoleLogs.filter(l => l.type === 'error').length}</li>
                    <li>Info logs: ${consoleLogs.filter(l => l.type === 'log').length}</li>
                </ul>
                
                <p><strong>Analisis:</strong> Lihat pola log di atas untuk mengidentifikasi masalah.</p>
            `;
            
            resultDiv.style.display = 'block';
        }

        function forceFixWithNewData() {
            const resultDiv = document.getElementById('force-result');
            const outputDiv = document.getElementById('force-output');
            
            try {
                // Force create comprehensive data
                const comprehensiveData = {
                    users: [
                        {
                            id: "2",
                            username: "wawan",
                            password: "$2b$10$fjJLf86PdOhugDGcr.HS2etUQSFcO2J4sY/39nuEWQiW4i4DKZrEy",
                            fullName: "H. Wawan Yogaswara, S.Pd, M.Pd",
                            role: "pengawas",
                            createdAt: "2025-11-09T13:55:25.337Z",
                            photoUrl: "/uploads/1762830374284-750171039.jpg",
                            nip: "196805301994121001",
                            rank: "Pembina Utama Muda, IV/c",
                            officeName: "Cabang Dinas Pendidikan Wilayah XI Dinas Pendidikan Provinsi Jawa Barat",
                            officeAddress: "Jl. A.Yani No. 23 Kel. Paminggir Kec. Garut Kota Kabupaten Garut",
                            homeAddress: "Griya Surya Indah No. 50 Kel. Sukagalih Kec. Tarogong Kidul Garut",
                            phone: "087733438282"
                        }
                    ],
                    tasks: [
                        {
                            id: "1762824574414",
                            userId: "2",
                            title: "Input Data Sekolah Binaan",
                            category: "Perencanaan",
                            completed: true,
                            date: "2025-11-10T00:00:00.000Z",
                            description: "Menginput data sekolah binaan ke sistem"
                        }
                    ],
                    supervisions: [
                        {
                            id: "1762860475743",
                            userId: "2",
                            schoolId: "1762822466523",
                            type: "Akademik",
                            schoolName: "SMKS PLUS SUKARAJA",
                            findings: "Pembelajaran berjalan dengan baik, namun perlu peningkatan di bidang teknologi",
                            recommendations: "Perlu penambahan fasilitas laboratorium komputer",
                            date: "2025-11-11T00:00:00.000Z"
                        }
                    ],
                    events: [
                        {
                            id: "1762737252008",
                            userId: "2",
                            name: "Apel Pagi",
                            date: "2025-11-10T00:00:00.000Z",
                            description: "Apel pagi rutin di kantor dinas",
                            time: "07:30"
                        },
                        {
                            id: "1762943350611",
                            userId: "2",
                            name: "Silaturahmi dan perkenalan kepala SMKN 14",
                            date: "2025-11-12T00:00:00.000Z",
                            description: "Kegiatan silaturahmi dengan kepala sekolah baru",
                            time: "09:00"
                        },
                        {
                            id: "1762943597820",
                            userId: "2",
                            name: "Pisah sambut Kepala SMKN 14 Garut",
                            date: "2025-11-12T00:00:00.000Z",
                            description: "Acara pisah sambut kepala sekolah",
                            time: "10:00"
                        },
                        {
                            id: "1763343052546",
                            userId: "2",
                            name: "Apel Pagi",
                            date: "2025-11-17T00:00:00.000Z",
                            description: "Apel pagi rutin mingguan",
                            time: "07:30"
                        }
                    ],
                    additionalTasks: [
                        {
                            id: "1762826477112",
                            userId: "2",
                            title: "Input data sekolah binaan",
                            organizer: "Dinas Pendidikan Provinsi Jawa Barat",
                            location: "Kantor Cabang Dinas Wilayah XI",
                            date: "2025-11-10T00:00:00.000Z",
                            description: "Kegiatan input data sekolah binaan untuk pelaporan"
                        },
                        {
                            id: "1762826573754",
                            userId: "2",
                            title: "Monitoring KBM",
                            organizer: "Dinas Pendidikan",
                            location: "SMKS YPPT GARUT",
                            date: "2025-11-11T00:00:00.000Z",
                            description: "Monitoring kegiatan belajar mengajar"
                        }
                    ],
                    schools: []
                };
                
                // Save comprehensive data
                localStorage.setItem('local-database', JSON.stringify(comprehensiveData));
                
                const totalActivities = comprehensiveData.tasks.length + 
                                      comprehensiveData.supervisions.length + 
                                      comprehensiveData.events.length + 
                                      comprehensiveData.additionalTasks.length;
                
                outputDiv.innerHTML = `
                    <h4>üöÄ Force Fix dengan Data Lengkap Berhasil!</h4>
                    <p>Data lengkap Wawan telah di-inject dengan userId "2".</p>
                    
                    <h5>üìä Data Comprehensive:</h5>
                    <table class="data-table">
                        <tr><th>Type</th><th>Count</th><th>Details</th></tr>
                        <tr><td>Users</td><td>1</td><td>H. Wawan Yogaswara, S.Pd, M.Pd (ID: 2)</td></tr>
                        <tr><td>Tasks</td><td>${comprehensiveData.tasks.length}</td><td>Input Data Sekolah Binaan</td></tr>
                        <tr><td>Supervisions</td><td>${comprehensiveData.supervisions.length}</td><td>SMKS PLUS SUKARAJA</td></tr>
                        <tr><td>Events</td><td>${comprehensiveData.events.length}</td><td>Apel Pagi, Silaturahmi, dll</td></tr>
                        <tr><td>Additional Tasks</td><td>${comprehensiveData.additionalTasks.length}</td><td>Input data, Monitoring KBM</td></tr>
                    </table>
                    
                    <h4>üìä Total Activities: ${totalActivities}</h4>
                    
                    <div style="color: #10b981; font-weight: bold; margin-top: 15px;">
                        ‚úÖ SEKARANG REFRESH APLIKASI DAN TEST DIALOG!
                        <br>Dialog harus menampilkan ${totalActivities} aktivitas untuk user Wawan.
                    </div>
                    
                    <h5>üéØ Expected Results di Dialog:</h5>
                    <ul>
                        <li>Tugas Pokok (${comprehensiveData.tasks.length}): Input Data Sekolah Binaan</li>
                        <li>Supervisi (${comprehensiveData.supervisions.length}): SMKS PLUS SUKARAJA</li>
                        <li>Kegiatan (${comprehensiveData.events.length}): Apel Pagi, Silaturahmi, dll</li>
                        <li>Tugas Tambahan (${comprehensiveData.additionalTasks.length}): Input data, Monitoring KBM</li>
                    </ul>
                `;
                
                resultDiv.style.display = 'block';
                console.log('üöÄ Force fix completed with comprehensive data:', comprehensiveData);

            } catch (error) {
                outputDiv.innerHTML = `
                    <div style="color: #ef4444; font-weight: bold;">
                        ‚ùå Error force fixing: ${error.message}
                    </div>
                `;
                resultDiv.style.display = 'block';
                console.error('‚ùå Error:', error);
            }
        }

        // Auto-run first check on load
        window.onload = function() {
            console.log('üîç Debug Aktivitas Wawan - Mendalam Ready');
            setTimeout(() => {
                checkLocalStorageAfterFix();
            }, 500);
        };
    </script>
</body>
</html>