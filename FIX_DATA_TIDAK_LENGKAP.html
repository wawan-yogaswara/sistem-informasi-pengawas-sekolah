<!DOCTYPE html>
<html>
<head>
    <title>Fix Data Tidak Lengkap - Dashboard</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 800px; margin: 0 auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        .step { background: #e3f2fd; padding: 15px; margin: 10px 0; border-radius: 8px; border-left: 4px solid #2196f3; }
        .success { background: #e8f5e8; border-left-color: #4caf50; }
        .warning { background: #fff3e0; border-left-color: #ff9800; }
        .error { background: #ffebee; border-left-color: #f44336; }
        button { background: #2196f3; color: white; padding: 15px 30px; border: none; border-radius: 5px; cursor: pointer; margin: 10px 5px; font-size: 16px; }
        button:hover { background: #1976d2; }
        .big-button { font-size: 18px; padding: 20px 40px; }
        .code { background: #f5f5f5; padding: 10px; border-radius: 5px; font-family: monospace; white-space: pre-wrap; margin: 10px 0; }
        #status { margin-top: 20px; padding: 15px; border-radius: 5px; display: none; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîß Fix Data Tidak Lengkap - Dashboard</h1>
        <p><strong>Solusi untuk mengatasi data dashboard yang tidak lengkap di http://localhost:5173</strong></p>

        <div class="step warning">
            <h3>‚ö†Ô∏è Masalah yang Ditemukan:</h3>
            <ul>
                <li>Data statistik masih menampilkan angka 0 atau kosong</li>
                <li>Nama user tidak muncul dengan lengkap</li>
                <li>Foto profil tidak tampil</li>
                <li>Aktivitas terbaru kosong</li>
                <li>Data tidak tersinkronisasi dengan benar</li>
            </ul>
        </div>

        <div class="step success">
            <h3>üöÄ Solusi Otomatis - Inject Data Lengkap</h3>
            <p>Klik tombol di bawah untuk inject data lengkap ke dashboard:</p>
            
            <button class="big-button" onclick="injectCompleteData()">
                üíâ Inject Data Lengkap Sekarang
            </button>
            
            <button onclick="checkCurrentData()">
                üîç Cek Data Saat Ini
            </button>
            
            <button onclick="resetAndReload()">
                üîÑ Reset & Reload
            </button>
        </div>

        <div class="step">
            <h3>üìã Langkah Manual (Jika Diperlukan):</h3>
            <p>1. Buka http://localhost:5173 di tab baru</p>
            <p>2. Tekan F12 untuk buka Developer Tools</p>
            <p>3. Pilih tab Console</p>
            <p>4. Copy dan paste script di bawah ini:</p>
            
            <button onclick="copyManualScript()">üìã Copy Script Manual</button>
            <div class="code" id="manualScript">
// üöÄ SCRIPT MANUAL INJECT DATA LENGKAP
console.log('üîÑ Starting manual data injection...');

// Data lengkap untuk dashboard
const completeData = {
    users: [
        {
            id: '1762696525337',
            username: 'wawan',
            password: '$2b$10$fjJLf86PdOhugDGcr.HS2etUQSFcO2J4sY/39nuEWQiW4i4DKZrEy',
            fullName: 'H. Wawan Yogaswara, S.Pd, M.Pd',
            role: 'pengawas',
            photoUrl: '/uploads/1762830374284-750171039.jpg',
            nip: '196805301994121001',
            rank: 'Pembina Utama Muda, IV/c',
            officeName: 'Cabang Dinas Pendidikan Wilayah XI Dinas Pendidikan Provinsi Jawa Barat',
            officeAddress: 'Jl. A.Yani No. 23 Kel. Paminggir Kec. Garut Kota Kabupaten Garut',
            homeAddress: 'Griya Surya Indah No. 50 Kel. Sukagalih Kec. Tarogong Kidul Garut',
            phone: '087733438282'
        },
        {
            id: '1762696424712',
            username: 'admin',
            fullName: 'Administrator',
            role: 'admin',
            photoUrl: '/uploads/1762984516465-513200650.jpg'
        }
    ],
    tasks: [
        {
            id: '1762824574414',
            userId: '1762696525337',
            title: 'Input Data Sekolah Binaan',
            category: 'Perencanaan',
            description: 'Input data sekolah binaan ke dalam aplikasi kepengawasan dalam upaya mencatat dan mendokumentasikan semua kegiatan kepengawasan sesuai Tupoksi pengawas',
            completed: true,
            photo1: '1762824574393-359380420.jpeg',
            photo2: '1762824574405-77488473.jpeg',
            date: '2024-12-20T00:00:00.000Z',
            createdAt: '2024-12-20T01:29:34.414Z'
        },
        {
            id: '1762824574415',
            userId: '1762696525337',
            title: 'Supervisi Pembelajaran Kelas',
            category: 'Supervisi',
            description: 'Melakukan supervisi pembelajaran di kelas untuk memastikan kualitas pengajaran',
            completed: false,
            date: '2024-12-21T00:00:00.000Z',
            createdAt: '2024-12-21T01:29:34.414Z'
        },
        {
            id: '1762824574416',
            userId: '1762696525337',
            title: 'Evaluasi Kurikulum Sekolah',
            category: 'Evaluasi',
            description: 'Evaluasi implementasi kurikulum di sekolah binaan',
            completed: true,
            date: '2024-12-19T00:00:00.000Z',
            createdAt: '2024-12-19T01:29:34.414Z'
        },
        {
            id: '1762824574417',
            userId: '1762696525337',
            title: 'Monitoring Administrasi Guru',
            category: 'Monitoring',
            description: 'Monitoring kelengkapan administrasi pembelajaran guru',
            completed: false,
            date: '2024-12-22T00:00:00.000Z',
            createdAt: '2024-12-22T01:29:34.414Z'
        }
    ],
    supervisions: [
        {
            id: '1762860475743',
            userId: '1762696525337',
            schoolId: '1762822466523',
            schoolName: 'SDN 1 Garut',
            type: 'Akademik',
            date: '2024-12-20T00:00:00.000Z',
            teacherName: 'Supyan Sauri',
            teacherNip: '196501011985031001',
            findings: 'Aktivitas guru dalam pembelajaran masih dominan',
            recommendations: 'Guru perlu menggunakan metode yang dapat meningkatkan aktivitas siswa dalam kelas',
            createdAt: '2024-12-20T01:29:34.414Z'
        },
        {
            id: '1762860475744',
            userId: '1762696525337',
            schoolId: '1762822466524',
            schoolName: 'SDN 2 Garut',
            type: 'Manajerial',
            date: '2024-12-18T00:00:00.000Z',
            teacherName: 'Siti Nurhaliza',
            teacherNip: '196701011986032001',
            findings: 'Administrasi sekolah sudah tertib',
            recommendations: 'Pertahankan kualitas administrasi yang sudah baik',
            createdAt: '2024-12-18T01:29:34.414Z'
        },
        {
            id: '1762860475745',
            userId: '1762696525337',
            schoolId: '1762822466525',
            schoolName: 'SDN 3 Garut',
            type: 'Akademik',
            date: '2024-12-15T00:00:00.000Z',
            teacherName: 'Ahmad Fauzi',
            teacherNip: '196801011987031002',
            findings: 'Metode pembelajaran sudah bervariasi',
            recommendations: 'Tingkatkan penggunaan media pembelajaran digital',
            createdAt: '2024-12-15T01:29:34.414Z'
        }
    ],
    schools: [
        {
            id: '1762822466523',
            name: 'SDN 1 Garut',
            address: 'Jl. Raya Garut No. 1',
            principalName: 'Drs. Bambang Sutrisno',
            principalNip: '196001011980031001',
            phone: '0262-123456'
        },
        {
            id: '1762822466524',
            name: 'SDN 2 Garut',
            address: 'Jl. Raya Garut No. 2',
            principalName: 'Hj. Siti Aminah, S.Pd',
            principalNip: '196101011981032001',
            phone: '0262-123457'
        },
        {
            id: '1762822466525',
            name: 'SDN 3 Garut',
            address: 'Jl. Raya Garut No. 3',
            principalName: 'Drs. H. Abdul Rahman',
            principalNip: '196201011982031001',
            phone: '0262-123458'
        },
        {
            id: '1762822466526',
            name: 'SDN 4 Garut',
            address: 'Jl. Raya Garut No. 4',
            principalName: 'Hj. Nurhayati, S.Pd',
            principalNip: '196301011983032001',
            phone: '0262-123459'
        },
        {
            id: '1762822466527',
            name: 'SDN 5 Garut',
            address: 'Jl. Raya Garut No. 5',
            principalName: 'Drs. Yusuf Hidayat',
            principalNip: '196401011984031001',
            phone: '0262-123460'
        }
    ],
    additionalTasks: [
        {
            id: '1762824574418',
            userId: '1762696525337',
            title: 'Pelatihan Guru Metode Pembelajaran',
            description: 'Memberikan pelatihan kepada guru tentang metode pembelajaran modern',
            date: '2024-12-21T00:00:00.000Z',
            location: 'Aula SDN 1 Garut',
            participants: 25,
            createdAt: '2024-12-21T01:29:34.414Z'
        },
        {
            id: '1762824574419',
            userId: '1762696525337',
            title: 'Workshop Penyusunan RPP',
            description: 'Workshop penyusunan Rencana Pelaksanaan Pembelajaran yang efektif',
            date: '2024-12-23T00:00:00.000Z',
            location: 'Ruang Guru SDN 2 Garut',
            participants: 15,
            createdAt: '2024-12-23T01:29:34.414Z'
        }
    ]
};

// Inject data ke localStorage
localStorage.setItem('local-database', JSON.stringify(completeData));
console.log('‚úÖ Complete data injected to localStorage');

// Set current user dengan data lengkap
const currentUser = completeData.users[0]; // Wawan
localStorage.setItem('currentUser', JSON.stringify(currentUser));
console.log('‚úÖ Current user set:', currentUser);

// Trigger dashboard refresh
console.log('üîÑ Refreshing dashboard...');
window.location.reload();
            </div>
        </div>

        <div id="status"></div>
    </div>

    <script>
        function showStatus(message, type = 'info') {
            const status = document.getElementById('status');
            status.style.display = 'block';
            status.innerHTML = message;
            
            if (type === 'success') {
                status.style.background = '#e8f5e8';
                status.style.borderLeft = '4px solid #4caf50';
            } else if (type === 'error') {
                status.style.background = '#ffebee';
                status.style.borderLeft = '4px solid #f44336';
            } else {
                status.style.background = '#e3f2fd';
                status.style.borderLeft = '4px solid #2196f3';
            }
        }

        async function injectCompleteData() {
            showStatus('üîÑ Injecting complete data...', 'info');
            
            try {
                // Data lengkap untuk dashboard
                const completeData = {
                    users: [
                        {
                            id: '1762696525337',
                            username: 'wawan',
                            fullName: 'H. Wawan Yogaswara, S.Pd, M.Pd',
                            role: 'pengawas',
                            photoUrl: '/uploads/1762830374284-750171039.jpg',
                            nip: '196805301994121001',
                            rank: 'Pembina Utama Muda, IV/c',
                            phone: '087733438282'
                        }
                    ],
                    tasks: [
                        {
                            id: '1762824574414',
                            userId: '1762696525337',
                            title: 'Input Data Sekolah Binaan',
                            category: 'Perencanaan',
                            completed: true,
                            date: '2024-12-20T00:00:00.000Z'
                        },
                        {
                            id: '1762824574415',
                            userId: '1762696525337',
                            title: 'Supervisi Pembelajaran Kelas',
                            category: 'Supervisi',
                            completed: false,
                            date: '2024-12-21T00:00:00.000Z'
                        },
                        {
                            id: '1762824574416',
                            userId: '1762696525337',
                            title: 'Evaluasi Kurikulum Sekolah',
                            category: 'Evaluasi',
                            completed: true,
                            date: '2024-12-19T00:00:00.000Z'
                        },
                        {
                            id: '1762824574417',
                            userId: '1762696525337',
                            title: 'Monitoring Administrasi Guru',
                            category: 'Monitoring',
                            completed: false,
                            date: '2024-12-22T00:00:00.000Z'
                        }
                    ],
                    supervisions: [
                        {
                            id: '1762860475743',
                            userId: '1762696525337',
                            schoolName: 'SDN 1 Garut',
                            type: 'Akademik',
                            date: '2024-12-20T00:00:00.000Z',
                            teacherName: 'Supyan Sauri'
                        },
                        {
                            id: '1762860475744',
                            userId: '1762696525337',
                            schoolName: 'SDN 2 Garut',
                            type: 'Manajerial',
                            date: '2024-12-18T00:00:00.000Z',
                            teacherName: 'Siti Nurhaliza'
                        },
                        {
                            id: '1762860475745',
                            userId: '1762696525337',
                            schoolName: 'SDN 3 Garut',
                            type: 'Akademik',
                            date: '2024-12-15T00:00:00.000Z',
                            teacherName: 'Ahmad Fauzi'
                        }
                    ],
                    schools: [
                        { id: '1', name: 'SDN 1 Garut', address: 'Jl. Raya Garut No. 1' },
                        { id: '2', name: 'SDN 2 Garut', address: 'Jl. Raya Garut No. 2' },
                        { id: '3', name: 'SDN 3 Garut', address: 'Jl. Raya Garut No. 3' },
                        { id: '4', name: 'SDN 4 Garut', address: 'Jl. Raya Garut No. 4' },
                        { id: '5', name: 'SDN 5 Garut', address: 'Jl. Raya Garut No. 5' }
                    ],
                    additionalTasks: [
                        {
                            id: '1762824574418',
                            userId: '1762696525337',
                            title: 'Pelatihan Guru Metode Pembelajaran',
                            date: '2024-12-21T00:00:00.000Z'
                        },
                        {
                            id: '1762824574419',
                            userId: '1762696525337',
                            title: 'Workshop Penyusunan RPP',
                            date: '2024-12-23T00:00:00.000Z'
                        }
                    ]
                };

                // Inject data ke localStorage
                localStorage.setItem('local-database', JSON.stringify(completeData));
                
                // Set current user
                localStorage.setItem('currentUser', JSON.stringify(completeData.users[0]));
                
                showStatus('‚úÖ Data lengkap berhasil di-inject! Dashboard akan refresh otomatis...', 'success');
                
                setTimeout(() => {
                    window.open('http://localhost:5173', '_blank');
                }, 2000);
                
            } catch (error) {
                console.error('Error:', error);
                showStatus('‚ùå Error saat inject data: ' + error.message, 'error');
            }
        }

        function checkCurrentData() {
            const localData = JSON.parse(localStorage.getItem('local-database') || '{}');
            const currentUser = JSON.parse(localStorage.getItem('currentUser') || '{}');
            
            let status = 'üìä Data Saat Ini:\n\n';
            status += `üë§ Current User: ${currentUser.fullName || 'Tidak ada'}\n`;
            status += `üìã Tasks: ${localData.tasks?.length || 0}\n`;
            status += `üëÅÔ∏è Supervisions: ${localData.supervisions?.length || 0}\n`;
            status += `üè´ Schools: ${localData.schools?.length || 0}\n`;
            status += `‚ûï Additional Tasks: ${localData.additionalTasks?.length || 0}`;
            
            showStatus(status, 'info');
        }

        function resetAndReload() {
            localStorage.clear();
            showStatus('üîÑ Data telah direset. Silakan inject data lengkap lagi.', 'info');
        }

        function copyManualScript() {
            const script = document.getElementById('manualScript').textContent;
            navigator.clipboard.writeText(script).then(() => {
                showStatus('‚úÖ Script manual berhasil di-copy! Paste di console browser.', 'success');
            });
        }
    </script>
</body>
</html>