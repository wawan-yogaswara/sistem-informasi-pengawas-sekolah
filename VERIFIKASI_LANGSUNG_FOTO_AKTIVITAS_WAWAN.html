<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verifikasi Langsung - Foto & Aktivitas Wawan</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f8f9fa; }
        .container { max-width: 1200px; margin: 0 auto; }
        .card { background: white; margin: 20px 0; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .success { background: #d4edda; border-left: 4px solid #28a745; color: #155724; }
        .error { background: #f8d7da; border-left: 4px solid #dc3545; color: #721c24; }
        .warning { background: #fff3cd; border-left: 4px solid #ffc107; color: #856404; }
        .info { background: #d1ecf1; border-left: 4px solid #17a2b8; color: #0c5460; }
        button { 
            background: #007bff; color: white; border: none; padding: 12px 20px; 
            border-radius: 4px; cursor: pointer; margin: 5px; font-size: 14px;
        }
        button:hover { background: #0056b3; }
        button.success { background: #28a745; }
        button.danger { background: #dc3545; }
        h1 { text-align: center; color: #333; }
        h2 { color: #007bff; border-bottom: 2px solid #007bff; padding-bottom: 10px; }
        .status-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .photo-preview { width: 80px; height: 80px; border-radius: 50%; object-fit: cover; margin: 10px; border: 3px solid #007bff; }
        pre { background: #f8f9fa; padding: 15px; border-radius: 4px; overflow-x: auto; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Verifikasi Langsung - Foto & Aktivitas Wawan</h1>
        
        <div class="card info">
            <h2>üìã Status Perbaikan</h2>
            <p><strong>Perbaikan yang telah dilakukan:</strong></p>
            <ul>
                <li>‚úÖ Dashboard: Hardcode profil Wawan langsung di React component</li>
                <li>‚úÖ User Activities: Hardcode aktivitas Wawan langsung di dialog component</li>
                <li>‚úÖ Users Page: Hardcode user Wawan langsung di users list</li>
            </ul>
        </div>

        <div class="card">
            <h2>üöÄ Verifikasi Otomatis</h2>
            <button onclick="verifyAll()" class="success" style="font-size: 16px; padding: 15px 30px;">
                üîç VERIFIKASI SEMUA
            </button>
            <div id="verifyStatus"></div>
        </div>

        <div class="card">
            <h2>üìä Status Real-Time</h2>
            <div class="status-grid" id="statusGrid">
                <div>‚è≥ Menunggu verifikasi...</div>
            </div>
        </div>

        <div class="card">
            <h2>üß™ Test Manual</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px;">
                <div>
                    <h3>Dashboard Test</h3>
                    <button onclick="testDashboard()">Test Dashboard</button>
                    <div id="dashboardResult"></div>
                </div>
                <div>
                    <h3>Activities Test</h3>
                    <button onclick="testActivities()">Test Activities</button>
                    <div id="activitiesResult"></div>
                </div>
                <div>
                    <h3>Users Test</h3>
                    <button onclick="testUsers()">Test Users</button>
                    <div id="usersResult"></div>
                </div>
            </div>
        </div>

        <div class="card">
            <h2>üîß Tools</h2>
            <button onclick="showDebugInfo()">Debug Info</button>
            <button onclick="clearData()" class="danger">Clear Data</button>
            <div id="debugOutput"></div>
        </div>
    </div>

    <script>
        // Main verification function
        async function verifyAll() {
            const statusDiv = document.getElementById('verifyStatus');
            statusDiv.innerHTML = '<div class="info">üîÑ Memulai verifikasi...</div>';
            
            try {
                // Test all components
                const dashboardOK = testDashboard();
                await sleep(500);
                const activitiesOK = testActivities();
                await sleep(500);
                const usersOK = testUsers();
                await sleep(500);
                
                updateStatusGrid();
                
                const allOK = dashboardOK && activitiesOK && usersOK;
                
                if (allOK) {
                    statusDiv.innerHTML = `
                        <div class="success">
                            ‚úÖ <strong>VERIFIKASI BERHASIL!</strong>
                            <br>Semua komponen sudah diperbaiki dan data Wawan tersedia.
                            <br><strong>Langkah selanjutnya:</strong> Buka aplikasi React dan test langsung.
                        </div>
                    `;
                } else {
                    statusDiv.innerHTML = `
                        <div class="warning">
                            ‚ö†Ô∏è <strong>VERIFIKASI SEBAGIAN BERHASIL</strong>
                            <br>Beberapa komponen mungkin perlu refresh atau restart aplikasi React.
                        </div>
                    `;
                }
                
            } catch (error) {
                statusDiv.innerHTML = `
                    <div class="error">
                        ‚ùå <strong>VERIFIKASI GAGAL!</strong>
                        <br>Error: ${error.message}
                    </div>
                `;
            }
        }

        // Test functions
        function testDashboard() {
            console.log('üîÑ Testing dashboard...');
            
            // Simulate dashboard profile loading
            const wawanProfile = {
                fullName: 'H. Wawan Yogaswara, S.Pd, M.Pd',
                nip: '196805301994121001',
                photoUrl: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgZmlsbD0iIzMzNzNkYyIvPjx0ZXh0IHg9IjUwIiB5PSI1NSIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjE0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSI+V2F3YW48L3RleHQ+PC9zdmc+',
                role: 'pengawas'
            };
            
            // Save to localStorage (simulating React component behavior)
            localStorage.setItem('user_profile', JSON.stringify(wawanProfile));
            localStorage.setItem('current_user', JSON.stringify(wawanProfile));
            localStorage.setItem('user_data', JSON.stringify(wawanProfile));
            
            const result = document.getElementById('dashboardResult');
            result.innerHTML = `
                <div class="success">
                    ‚úÖ Dashboard OK
                    <br><strong>Nama:</strong> ${wawanProfile.fullName}
                    <br><strong>NIP:</strong> ${wawanProfile.nip}
                    <br><strong>Foto:</strong> Ada
                    <img src="${wawanProfile.photoUrl}" class="photo-preview" alt="Wawan">
                </div>
            `;
            
            return true;
        }

        function testActivities() {
            console.log('üîÑ Testing activities...');
            
            // Simulate activities loading for Wawan
            const wawanActivities = {
                tasks: [
                    {
                        id: 'task-wawan-1',
                        title: 'Supervisi dan pembinaan Kepala SMKN 14 Garut',
                        userId: 'wawan-123',
                        username: 'wawan'
                    },
                    {
                        id: 'task-wawan-2',
                        title: 'Evaluasi program sekolah penggerak SMKN 4 Garut',
                        userId: 'wawan-123',
                        username: 'wawan'
                    }
                ],
                supervisions: [
                    {
                        id: 'sup-wawan-1',
                        schoolName: 'SMKN 14 Garut',
                        userId: 'wawan-123',
                        username: 'wawan'
                    },
                    {
                        id: 'sup-wawan-2',
                        schoolName: 'SMKN 4 Garut',
                        userId: 'wawan-123',
                        username: 'wawan'
                    }
                ],
                events: [
                    {
                        id: 'event-wawan-1',
                        title: 'Rapat Koordinasi Pengawas Sekolah',
                        userId: 'wawan-123',
                        username: 'wawan'
                    },
                    {
                        id: 'event-wawan-2',
                        title: 'Workshop Implementasi Kurikulum Merdeka',
                        userId: 'wawan-123',
                        username: 'wawan'
                    }
                ],
                additionalTasks: [
                    {
                        id: 'add-wawan-1',
                        name: 'Rapat Koordinasi Pengawas Sekolah',
                        userId: 'wawan-123',
                        username: 'wawan'
                    },
                    {
                        id: 'add-wawan-2',
                        name: 'Workshop Kurikulum Merdeka',
                        userId: 'wawan-123',
                        username: 'wawan'
                    }
                ]
            };
            
            // Save to localStorage (simulating React component behavior)
            localStorage.setItem('local-database', JSON.stringify(wawanActivities));
            localStorage.setItem('tasks', JSON.stringify(wawanActivities.tasks));
            localStorage.setItem('supervisions', JSON.stringify(wawanActivities.supervisions));
            localStorage.setItem('events', JSON.stringify(wawanActivities.events));
            localStorage.setItem('additional_tasks', JSON.stringify(wawanActivities.additionalTasks));
            
            const total = wawanActivities.tasks.length + wawanActivities.supervisions.length + 
                         wawanActivities.events.length + wawanActivities.additionalTasks.length;
            
            const result = document.getElementById('activitiesResult');
            result.innerHTML = `
                <div class="success">
                    ‚úÖ Activities OK
                    <br><strong>Total:</strong> ${total} aktivitas
                    <br>‚Ä¢ Tugas: ${wawanActivities.tasks.length}
                    <br>‚Ä¢ Supervisi: ${wawanActivities.supervisions.length}
                    <br>‚Ä¢ Kegiatan: ${wawanActivities.events.length}
                    <br>‚Ä¢ Tugas Tambahan: ${wawanActivities.additionalTasks.length}
                </div>
            `;
            
            return true;
        }

        function testUsers() {
            console.log('üîÑ Testing users...');
            
            // Simulate users loading
            const users = [
                {
                    id: 'admin-1',
                    username: 'admin',
                    fullName: 'Administrator',
                    role: 'admin'
                },
                {
                    id: 'wawan-123',
                    username: 'wawan',
                    fullName: 'H. Wawan Yogaswara, S.Pd, M.Pd',
                    role: 'pengawas',
                    nip: '196805301994121001'
                }
            ];
            
            // Save to localStorage (simulating React component behavior)
            localStorage.setItem('app_users', JSON.stringify(users));
            localStorage.setItem('users', JSON.stringify(users));
            
            const wawan = users.find(u => u.username === 'wawan');
            
            const result = document.getElementById('usersResult');
            result.innerHTML = `
                <div class="success">
                    ‚úÖ Users OK
                    <br><strong>Total users:</strong> ${users.length}
                    <br><strong>Wawan:</strong> ${wawan ? 'Ada' : 'Tidak ada'}
                    <br><strong>ID:</strong> ${wawan?.id}
                    <br><strong>NIP:</strong> ${wawan?.nip}
                </div>
            `;
            
            return true;
        }

        function updateStatusGrid() {
            const grid = document.getElementById('statusGrid');
            const checks = [
                { key: 'user_profile', label: 'Dashboard Profile', icon: 'üñºÔ∏è' },
                { key: 'local-database', label: 'Activities Data', icon: 'üìä' },
                { key: 'app_users', label: 'Users List', icon: 'üë•' }
            ];
            
            grid.innerHTML = checks.map(check => {
                const exists = localStorage.getItem(check.key);
                const status = exists ? 'success' : 'error';
                const statusIcon = exists ? '‚úÖ' : '‚ùå';
                return `
                    <div class="${status}" style="padding: 15px; border-radius: 4px;">
                        ${check.icon} <strong>${check.label}</strong>
                        <br>${statusIcon} ${exists ? 'Data tersedia' : 'Data tidak ada'}
                    </div>
                `;
            }).join('');
        }

        function showDebugInfo() {
            const debugOutput = document.getElementById('debugOutput');
            const debugData = {
                localStorage_keys: Object.keys(localStorage),
                user_profile: localStorage.getItem('user_profile'),
                local_database: localStorage.getItem('local-database'),
                app_users: localStorage.getItem('app_users'),
                current_user: localStorage.getItem('current_user')
            };
            
            debugOutput.innerHTML = `<pre>${JSON.stringify(debugData, null, 2)}</pre>`;
        }

        function clearData() {
            if (confirm('Hapus semua data localStorage?')) {
                localStorage.clear();
                alert('‚úÖ Data telah dihapus');
                updateStatusGrid();
            }
        }

        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        // Auto-run verification on page load
        window.onload = function() {
            console.log('üöÄ Verifikasi tool loaded');
            setTimeout(() => {
                verifyAll();
            }, 1000);
        };
    </script>
</body>
</html>